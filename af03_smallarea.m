A=[ 7.5346    6.0598;
   44.7654   60.8905;
   23.7808   60.8905;
   98.2423   62.2444;
   31.2269   75.7828;
   28.5192    6.0598;
   66.4269   81.1982;
   71.8423    6.7367;
    3.4731   50.7367;
  136.1500    4.0290];
B=[ 143.5962   48.0290;
    184.8885   41.2598;
    145.6269   26.3674;
    206.5500   21.6290;
    151.0423    4.0290;
    216.7038    3.3521;
    141.5654   52.0905;
    159.8423    3.3521;
    159.8423   48.0290;
    202.4885    4.7059];
C=[ 2.7962  176.6444;
   37.9962  175.2905;
    4.1500  154.3059;
   69.1346  150.9213;
    9.5654  130.6136;
  102.9808  125.1982;
    6.1808  171.9059;
   58.3038  101.5059;
   40.7038  173.2598;
   88.0885   86.6136];
D=[ 181.5038  141.4444;
    215.3500  138.7367;
    177.4423  127.2290;
    215.3500  120.4598;
    195.0423  110.9828;
    216.7038  110.9828;
    184.2115  146.1828;
    197.7500  108.2751;
    211.9654  146.8598;
    213.9962   96.7674];
E=[ 161.1962  226.0598;
    192.3346  191.5367;
    172.0269  227.4136;
    205.1962  198.3059;
    187.5962  227.4136;
    215.3500  201.0136;
    167.2885  215.2290;
    213.3192  201.0136;
    193.6885  184.0905;
    215.3500  184.0905];

ebsd = af03s_load();

plot(ebsd, 'antipodal');

gset = {A, B, C, D, E};

cmap = colormap(lines(5));

m = [];
% mf = [];
for i = 1:length(gset)
    G = gset{i};
    for j = 1:size(G,1)/2
        
        L = G([2*j-1,2*j],:);
        hold on; line(L(:,1),L(:,2),'LineWidth', 1.5, 'Color',cmap(i,:));
        
        [p,dist] = spatialProfile(ebsd, L);
        [a,d] = spatialProfileDiff(ebsd, L,5);
        
        a0 = angle(p,p(1))/degree;
        d0 = dist;
        a1 = angle(p(2:end),p(1:end-1))/degree;
        d1 = dist(2:end);
        
%         windowSize = 3;
%         a1f = filter(ones(1,windowSize)/windowSize,1,a1);
%         
%         mf = vertcat(m, a1f);
        m = vertcat(m, a1);
    end
end

hold off;

















